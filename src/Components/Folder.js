import React from "react";
import "./Folder.css";
import { useTableData } from "../TableDataContext";

function Folder({ name, children }) {
  const { tableData, expandedRows, toggleRow } = useTableData();

  // Function to toggle the visibility of child rows

  function generateFolders(data) {
    return (
      <>
        <div className="folder border-bottom ">
          <li class="list-group-item">
            <div class="d-flex align-items-center">
              <svg
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
              >
                <title>caret-right</title>
                <path d="M14.828 13.013c0.3-0.239 0.491-0.603 0.491-1.013 0-0.303-0.105-0.582-0.279-0.802l0.002 0.003c-0.064-0.080-0.134-0.15-0.211-0.211l-0.003-0.002-4.059-3.204c-0.217-0.171-0.494-0.274-0.796-0.274-0.712 0-1.289 0.576-1.291 1.287v6.407c0.001 0.712 0.578 1.289 1.29 1.289 0.302 0 0.58-0.104 0.8-0.278l-0.003 0.002z"></path>
              </svg>

              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="19.278"
                height="16.049"
                viewBox="0 0 19.278 16.049"
              >
                <path
                  id="Path_44444"
                  data-name="Path 44444"
                  d="M432.973,566.988a2.468,2.468,0,0,0-2.4-1.9l-.114,0c-1.048,0-2.111,0-3.141,0h-1.624a2.485,2.485,0,0,1-1.781-.755l-.33-.331c-.182-.185-.371-.375-.559-.558a2.552,2.552,0,0,0-1.8-.8c-1.577-.007-3.153-.008-4.681,0a2.312,2.312,0,0,0-1.512.6,2.7,2.7,0,0,0-.834,2.547.972.972,0,0,1,.038.27,1.189,1.189,0,0,1-.138.323,2.407,2.407,0,0,0-.308,1.436c.049.531.1,1.06.152,1.589.071.739.145,1.5.214,2.254q.095,1.065.186,2.129c.07.824.145,1.677.221,2.515l0,.039a2.548,2.548,0,0,0,2.533,2.341c.069,0,.14,0,.209-.008h6.036v-.026l0-.006v.025l2.088,0c1.368,0,2.783,0,4.173,0,.054,0,.108.005.162.005a2.49,2.49,0,0,0,2.315-1.571,5.347,5.347,0,0,0,.26-1.684c.07-.7.133-1.412.194-2.1q.049-.549.1-1.1c.129-1.38.265-2.869.418-4.552A2.023,2.023,0,0,0,432.973,566.988Zm-2.548-.613a1.292,1.292,0,0,1,.4.031,1.258,1.258,0,0,1,.924,1.519c-.083.711-.144,1.437-.2,2.139-.026.313-.052.624-.08.937q-.069.758-.136,1.516c-.107,1.212-.218,2.466-.337,3.7a1.3,1.3,0,0,1-1.294,1.17H417.119a.385.385,0,0,1-.048,0,1.241,1.241,0,0,1-1.239-1.243c-.144-1.605-.3-3.237-.44-4.816l-.135-1.459c-.018-.207-.038-.414-.057-.62-.048-.511-.1-1.038-.137-1.558a1.131,1.131,0,0,1,0-.184,1.234,1.234,0,0,1,1.227-1.143.893.893,0,0,1,.09,0h7.069v-.025h0v.031Zm-9.133-1.293c-.86,0-1.746-.007-2.617.008a16.136,16.136,0,0,0-3.122.11c-.046.01-.076.007-.092-.008s-.018-.077-.013-.126c0-.021,0-.041,0-.056a1.18,1.18,0,0,1,1.086-1.085c.526-.006,1.056-.007,1.584-.007s1.059,0,1.578,0,1.054,0,1.581,0h0a.882.882,0,0,1,.527.172,12.23,12.23,0,0,1,1.045.988C422.332,565.083,421.8,565.085,421.292,565.082Zm-2.617.009v.024h0Z"
                  transform="translate(-413.78 -562.633)"
                  fill="#1d1d1b"
                />
              </svg>

              <span onClick={() => toggleRow(data.id)} className="px-2 me-auto">
                {data.value}
              </span>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 18 18"
              >
                <path
                  id="Path_44715"
                  fill="#C0CEDE"
                  data-name="Path 44715"
                  d="M595.3,847.065a9,9,0,1,0,9,9A9,9,0,0,0,595.3,847.065Zm.88,12.473a.884.884,0,1,1-1.76,0V856.2a.93.93,0,0,1,.883-.971.833.833,0,0,1,.62.282.992.992,0,0,1,.257.592Zm.2-6.83a1.079,1.079,0,1,1-.315-.769,1.068,1.068,0,0,1,.315.661Z"
                  transform="translate(-586.296 -847.065)"
                />
              </svg>
            </div>
          </li>
        </div>
        <br />
        <div style={{ paddingLeft: "20px" }}>
          {expandedRows[data.id] &&
            data.children.map((child) => generateFolders(child))}
        </div>
      </>
    );
  }

  return <div>{tableData.map((item) => generateFolders(item))}</div>;
}

export default Folder;
